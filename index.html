<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>title</title>

        <link rel="stylesheet" href="frameworks/bootstrap-material/css/material.min.css">
        <link rel="stylesheet" href="css/jquery.mmenu.all.css">
        <link href="css/style.css" rel="stylesheet" type="text/css">
    </head>
    <body>
        <section id="page-content">
            <div class="container-fluid" id="topNavi">
                <div class="row">
                    <div class="col">
                        <a href="#leftMenu" class="btn btn-outline-primary float-left">DM Tools</a>
                        <a href="#rightMenu" class="btn btn-outline-primary float-right">App settings</a>
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <div id="mapContainer">
                            <!-- This is the magic -->
                            <svg id="svgMap">
                                <defs>
                                    <pattern id="playerMapImagePatt" patternUnits="userSpaceOnUse" width="100%" height="100%">
                                        <image xlink:href="" x="0" y="0" width="100%" height="100%" />
                                    </pattern>
                                    <pattern id="dmMapImagePatt" patternUnits="userSpaceOnUse" width="100%" height="100%">
                                        <image xlink:href="" x="0" y="0" width="100%" height="100%" />
                                    </pattern>
                                    <pattern id="fogMapImagePatt" patternUnits="userSpaceOnUse" width="100%" height="100%">
                                        <image xlink:href="" x="0" y="0" width="100%" height="100%" />
                                    </pattern>
                                    <pattern id="mapGridPatt" patternUnits="userSpaceOnUse" width="100%" height="100%">
                                        <rect width="100%" height="100%" fill="rgba(0,0,0,0)" stroke-width=5 stroke="#000000" />
                                    </pattern>
                                    <mask id="dmMask">
                                        <image xlink:href="" x="0" y="0" width="100%" height="100%" />                                        
                                    </mask>
                                    <mask id="fogMask">
                                        <image xlink:href="" x="0" y="0" width="100%" height="100%" />                                        
                                    </mask>
                                </defs>
                                <rect id="playerMap" fill="url(#playerMapImagePatt)" width="100%" height="100%"/>
                                <rect id="dmMap" fill="url(#dmMapImagePatt)" width="100%" height="100%" mask="url(#dmMask)"/>
                                <rect id="mapGrid" fill="url(#mapGridPatt)" width="100%" height="100%"/>
<!--                                <rect id="fogOfWar" fill="#00ff00" width=100% height=100% mask="url(#fogMask)"/>-->
                            </svg>
                            <canvas id="dmCanvas"></canvas>
                            <canvas id="fogCanvas"></canvas>
                        </div>
                    </div>
                    <div class="col">
                        <div class="row">
                            <button class="btn btn-primary" data-toggle="collapse" data-target="#mapSetup" aria-expanded="true" aria-controls="mapSetup">
                                Map Setup
                            </button>
                            <button class="btn btn-primary collapsed" data-toggle="collapse" data-target="#playMode" aria-expanded="false" aria-controls="playMode">
                                Playing
                            </button>
                        </div>
                        <div class="row">
                            <div classs="col">
                                <div id="accordion">
                                    <div class="card">
                                        <div id="mapSetup" class="collapse show" data-parent="#accordion">
                                            <div class="card-body">
                                                <div class="form-row">
                                                    <div class="form-group col">
                                                        <label for="playerMapImageSetting">Set player map image</label>
                                                        <input type="file" class="form-control-file" id="playerMapImageSetting">
                                                        <p>The player map image size is used for the other images</p>
                                                    </div>
                                                    <div class="form-group col">
                                                        <label for="dmMapImageSetting">Set DM map image</label>
                                                        <input type="file" class="form-control-file" id="dmMapImageSetting">
                                                    </div>
                                                    <div class="form-group col">
                                                        <label for="fogMapImageSetting">Set fog image</label>
                                                        <input type="file" class="form-control-file" id="fogMapImageSetting">
                                                    </div>
                                                </div>
                                                <div class="form-row">
                                                    <div class="form-group col">
                                                        <label for="gridSizeXSetting">Grid spaces (Horizontal)</label>
                                                        <input type="number" class="form-control" id="gridSizeXSetting" aria-describedby="gridSizeXSettingHelp" placeholder="1">
                                                        <small id="gridSizeXSettingHelp" class="form-text text-muted">Enter horizontal number of grid spaces</small>
                                                    </div>
                                                    <div class="form-group col">
                                                        <label for="gridSizeYSetting">Grid spaces (Vertical)</label>
                                                        <input type="number" class="form-control" id="gridSizeYSetting" aria-describedby="gridSizeYSettingHelp" placeholder="1">
                                                        <small id="gridSizeYSettingHelp" class="form-text text-muted">Enter vertical nunmber of grid spaces</small>
                                                    </div>
                                                    <div class="form-group col">
                                                        <label for="gridColorSetting">Grid color</label>
                                                        <input type="color" class="form-control" id="gridColorSetting" aria-describedby="gridColorSettingHelp" placeholder="#000000">
                                                        <small id="gridColorSettingHelp" class="form-text text-muted">Hex color of grid</small>
                                                    </div>
                                                    <div class="form-group col">
                                                        <label for="gridThicknessSetting">Grid thickness</label>
                                                        <input type="number" class="form-control" id="gridThicknessSetting" aria-describedby="gridThicknessSettingHelp" placeholder="5">
                                                        <small id="gridThicknessSettingHelp" class="form-text text-muted">Thickness of grid,<i> in px on map</i></small>
                                                    </div>
                                                </div>
                                                <div class="form-row">
                                                    <div class="form-group col">
                                                        <label for="fogColorSetting">Fog color</label>
                                                        <input type="color" class="form-control" id="fogColorSetting" aria-describedby="fogColorSettingHelp" placeholder="#804000">
                                                        <small id="fogColorSettingHelp" class="form-text text-muted">Set fog of war color</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card">
                                        <div id="playMode" class="collapse" data-parent="#accordion">
                                            <div class="card-body">
                                                <h2>Controls</h2>
                                                <div class="btn-group" role="group" aria-label="modeSettingLabel" id="modeSetting">
                                                    <button type="button" class="btn btn-secondary">Add fog</button>
                                                    <button type="button" class="btn btn-secondary">Substract fog</button>
                                                    <button type="button" class="btn btn-secondary">Right</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>     
        <menu id="leftMenu">
            <ul>
                <li><a href="/">Home</a></li>
                <li><a href="/about/">About us</a></li>
                <li><a href="/contact/">Contact</a></li>
            </ul>
        </menu>
        <menu id="rightMenu">
            <ul>
            </ul>
        </menu>
        <!--- Modals --->
        <div class="modal" tabindex="-1" role="dialog" id="fowWarningModal">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Fog of war mode <b>WARNING</b></h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>Changing fog of war (FOW) mode or regenerating the FOW resets the complete fog on the map.</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal" id="confirmFogOfWarSetting">Continue</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal" id="cancelFogOfWarSetting">Cancel</button>
                    </div>
                </div>
            </div>
        </div>
        <script
                src="https://code.jquery.com/jquery-3.3.1.min.js"
                integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
                crossorigin="anonymous"></script>
        <script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
        <script src="js/jquery.mmenu.all.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="frameworks/bootstrap-material/js/material.min.js"></script>

        <script src="js/base.js"></script>
    </body>
</html>